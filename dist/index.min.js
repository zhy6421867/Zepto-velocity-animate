$(function(){var n=($("html").attr("data-dpr"),$("html").css("font-size")),e="",t=!0;for(i=0;i<n.length&&"p"!=n[i];i++)e+=n[i];var a=$(window).height();$card_item=$(".card_item"),$card_star=$(".card_star"),$index_load=$(".index_load"),$card_sm_list=$(".card_sm_list"),$card_sm_li=$(".card_sm_list").find("ul li"),$(".card_body").velocity({opacity:1},1e3);var o={};o.cid="",o.answer="",o.version="1.0.0";var s={};s.row1=[],s.row2=[],s.row3=[],s.row4=[];var c={},d=function(){$("#z_index13").velocity({translateY:"-"+100/750*20+"rem"},400,function(){r()})},r=function(){$("#z_index12").velocity({translateX:"3.12rem",translateY:"-"+100/750*20+"rem"},400,function(){l()})},l=function(){$("#z_index11").velocity({translateX:"-1.6rem",translateY:"2.4rem"},400,function(){f()})},f=function(){$("#z_index10").velocity({translateX:"1.6rem",translateY:"2.4rem"},400,function(){u()})},u=function(){$card_star.addClass("flash"),$(".z_start").velocity({opacity:1},500),$card_item.on("click",function(){$card_item.off("click");var n=$(this);n.find(".card_forward").addClass("out"),setTimeout(function(){n.find(".card_back").addClass("in").removeClass("out"),$index_load.hide(),n.siblings().velocity({opacity:0},400,function(){n.siblings().addClass("hide"),m(n)})},500)})},m=function(n){var i=(a/e-13.6)/3;n.velocity({translateX:"-"+142/750*20+"rem",translateY:"-"+(8-i)+"rem"},function(){_(n)},100)},_=function(n){n.velocity({width:"100%",height:"13.6rem"},function(){loadFirst(n)},100)},p=function(n,i){n?(document.getElementById("sm0"+i).setAttribute("src","img/female0"+i+"_sm.png"),$card_sm_li.eq(i).find(".z_forward").addClass("out"),setTimeout(function(){$card_sm_li.eq(i).find(".z_back").addClass("in").removeClass("out")},500)):(document.getElementById("sm0"+i).setAttribute("src","img/man0"+i+"_sm.png"),$card_sm_li.eq(i).find(".z_forward").addClass("out"),setTimeout(function(){$card_sm_li.eq(i).find(".z_back").addClass("in").removeClass("out")},500))},v=function(){$(".z_modal").velocity({opacity:"1"},100),setTimeout(function(){$(".z_modal").velocity({opacity:"0"},100)},600)},h=function(n,e,t){for(i=0;i<n.length;i++)if(n.eq(i).hasClass("on")){var a=n.eq(i).attr("data-text");if(s["row"+t].push(a),!e)break}},w=function(n){var i=document.getElementById("answerLine").innerHTML;$(i).appendTo(n.find(".card_box")),t?n.find(".answer_img").removeClass("femaleHide"):n.find(".answer_img").removeClass("manHide"),setTimeout(function(){n.find(".z_option").on("click",function(){$(this).hasClass("on")?$(this).removeClass("on"):$(this).addClass("on")}),n.find(".answer_btn").on("click",function(){n.find(".z_option").hasClass("on")?(p(t,2),n.find(".card_back").addClass("slideOutRight"),h(n.find(".z_option"),!0,1),setTimeout(function(){n.find(".card_back").remove(),y(n)},1e3)):v()})},500)},y=function(n){var i=document.getElementById("answerFour").innerHTML;$(i).appendTo(n.find(".card_box"));var e=!1;t?n.find(".answer_img").removeClass("femaleHide"):n.find(".answer_img").removeClass("manHide"),setTimeout(function(){n.find(".z_option").on("click",function(){n.find(".z_option").removeClass("on"),$(this).addClass("on"),e=!0}),n.find(".answer_btn").on("click",function(){e?(p(t,3),n.find(".card_back").addClass("slideOutRight"),h(n.find(".z_option"),!1,2),setTimeout(function(){n.find(".card_back").remove(),C(n)},1e3)):v()})},500)},C=function(n){var i=document.getElementById("answerFive").innerHTML;$(i).appendTo(n.find(".card_box"));var e=!1;setTimeout(function(){n.find(".z_option").on("click",function(){n.find(".z_option").removeClass("on"),$(this).addClass("on"),e=!0}),n.find(".answer_btn").on("click",function(){e?(p(t,4),n.find(".card_back").addClass("slideOutRight"),h(n.find(".z_option"),!1,3),setTimeout(function(){n.find(".card_back").remove(),loadFifth(n)},1e3)):v()})},500)},k=navigator.userAgent,z=k.indexOf("Android")>-1||k.indexOf("Adr")>-1,b=!!k.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(z)document.addEventListener("WebViewJavascriptBridgeReady",function(n){var i=n.bridge;i.registerHandler("load",function(n,i){$(".z_title").addClass("bounceInDown").show(),$("#z_index14").velocity({translateX:"-3.12rem",translateY:"-"+100/750*20+"rem"},300,function(){d()});var e=JSON.parse(n);o.cid=e.c_id,c.d=e["X-M-Device"],c.p=e["X-M-Platform"]}),window.loadFirst=function(n){var e=document.getElementById("answerSex").innerHTML;n.find(".card_back").html(e),$card_sm_list.show().addClass("slideInUp");var a=!1;$(".z_skip").velocity({opacity:"1"},200,function(){$(".z_skip").on("click",function(){i.callHandler("finish","private",function(n){})})}),setTimeout(function(){n.find(".z_option").on("click",function(){n.find(".z_option").removeClass("on"),$(this).addClass("on"),t=0!=$(this).index(),a=!0}),n.find(".answer_btn").on("click",function(){a?(p(t,1),n.find(".card_back").removeClass("flip").addClass("animated slideOutRight"),setTimeout(function(){n.find(".card_back").remove(),$(".z_skip").velocity({opacity:"0"},200,function(){$(".z_skip").off("click")}),w(n),t?s.sex="女":s.sex="男"},1e3)):v()})},500)},window.loadFifth=function(n){if(t)var e=document.getElementById("answerExperienceFemale").innerHTML;else var e=document.getElementById("answerExperienceMan").innerHTML;$(e).appendTo(n.find(".card_box")),setTimeout(function(){n.find(".z_option").on("click",function(){$(this).hasClass("on")?$(this).removeClass("on"):$(this).addClass("on")}),n.find(".answer_btn_final").on("click",function(){n.find(".z_option").hasClass("on")?(h(n.find(".z_option"),!0,4),$(".z_success").velocity("fadeIn",{display:"block"},300),$(".z_success .z_btn").on("click",function(){o.answer=JSON.stringify(s),$.ajax({type:"POST",url:"http://om.meiningjia.com/v2/customer/quiz/answer",dataType:"json",headers:{"X-M-Device":c.d,"X-M-Platform":c.p},contentType:"application/json; charset=utf-8",data:JSON.stringify(o),success:function(n){i.callHandler("questionComplete","private",function(n){})},error:function(n){i.callHandler("questionComplete","private",function(n){})}})})):v()})},500)}},!1);else if(b){var g=function(n){if(window.WebViewJavascriptBridge)return n(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(n);window.WVJBCallbacks=[n];var i=document.createElement("iframe");i.style.display="none",i.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(i),setTimeout(function(){document.documentElement.removeChild(i)},0)};g(function(n){n.registerHandler("load",function(n,i){var e=JSON.parse(n);o.cid=e.c_id,c.d=e["X-M-Device"],c.p=e["X-M-Platform"]}),n.registerHandler("webAnimationStart",function(n,i){$(".z_title").addClass("bounceInDown").show(),$("#z_index14").velocity({translateX:"-3.12rem",translateY:"-"+100/750*20+"rem"},300,function(){d()})}),window.loadFirst=function(i){var e=document.getElementById("answerSex").innerHTML;i.find(".card_back").html(e),$card_sm_list.show().addClass("slideInUp");var a=!1;$(".z_skip").velocity({opacity:"1"},200,function(){$(".z_skip").on("click",function(){n.callHandler("finish",{type:"private"},function(n){})})}),setTimeout(function(){i.find(".z_option").on("click",function(){i.find(".z_option").removeClass("on"),$(this).addClass("on"),t=0!=$(this).index(),a=!0}),i.find(".answer_btn").on("click",function(){a?(p(t,1),i.find(".card_back").removeClass("flip").addClass("animated slideOutRight"),setTimeout(function(){i.find(".card_back").remove(),$(".z_skip").velocity({opacity:"0"},200,function(){$(".z_skip").off("click")}),w(i),t?s.sex="女":s.sex="男"},1e3)):v()})},500)},window.loadFifth=function(i){if(t)var e=document.getElementById("answerExperienceFemale").innerHTML;else var e=document.getElementById("answerExperienceMan").innerHTML;$(e).appendTo(i.find(".card_box")),setTimeout(function(){i.find(".z_option").on("click",function(){$(this).hasClass("on")?$(this).removeClass("on"):$(this).addClass("on")}),i.find(".answer_btn_final").on("click",function(){i.find(".z_option").hasClass("on")?($(".z_success").velocity("fadeIn",{display:"block"},300),h(i.find(".z_option"),!0,4),$(".z_success .z_btn").on("click",function(){o.answer=JSON.stringify(s),$.ajax({type:"POST",url:"http://om.meiningjia.com/v2/customer/quiz/answer",dataType:"json",headers:{"X-M-Device":c.d,"X-M-Platform":c.p},contentType:"application/json; charset=utf-8",data:JSON.stringify(o),success:function(i){n.callHandler("questionComplete",{type:"private"},function(n){})},error:function(i){n.callHandler("questionComplete",{type:"private"},function(n){})}})})):v()})},500)}})}});